## Agent 约束

- **优先使用配置/工具**：涉及学院、专业、课程属性、term 等信息时，先查阅 `app/src/config` 系列文件和 OpenSpec 中的规则，确保可以通过配置或动态工具获取，而不是在组件/模块里硬编码。
- **保持可复用与鲁棒性**：新增的工具函数或 store 应设计为多学期可重用，必要时通过 termId 选择不同的数据源；避免将某一学期的常量散落在 UI 或业务逻辑中。
- **配置优先**：若功能需要预置数据，落在 `config/*.ts` 或明确的 JSON/DSL，附带注释说明如何扩展，并在文档中记录。
- **同步文档**：当新增/修改配置或规则时，同时在 `openspec/specs/*/design.md` 创建或更新对应说明（例如 data-pipeline、rules-tools），确保后续 agent 能自动查阅；若缺少文档需主动创建。
- **默认体验**：任何筛选器或视图默认应显示完整数据（“全部”），避免因为初始选项导致页面空白。
- **文档同步**：当行为或约束变化时，更新相关设计文档（如 backlog、data-pipeline 等），让后续迭代可以追踪。
- 涉及到具体实现的时候，最好用文档。因此，鼓励主动往文档主动添加和维护更新实际的技术细节。
- **TODO 维护（强制）**：任何新增/完成/废弃的任务，必须同步修改 `openspec/specs/backlog/design.md`——不允许留下过期条目；发现遗留立即清理。
- **数据来源优先级**：凡属学院/专业/约束等元数据，默认来自 parser（前端严禁硬编码）。若 parser 缺失字段，应追加解析逻辑或补充文档 TODO，直到数据能自动生成；“临时代码兜底”必须附带明确的移除计划。
- **Dev smoke 规则**：提交前可运行 `scripts/dev-smoke.sh [秒数]`（默认 15s）自动启动 `npm run dev` 并定时退出，查看 `dev-smoke.log` 是否有启动报错；避免长时间占用端口。
